export const currency = (v) => `R$ ${Number(v || 0).toFixed(2)}`;
export const fmtDate = (d) => new Date(d).toLocaleDateString('pt-BR');
export const norm = (s = '') => String(s).toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').replace(/[^a-z0-9 ]/g,' ').replace(/\s+/g,' ').trim();
export const AISLES = ['Massas & GrÃ£os','Molhos & Enlatados','LaticÃ­nios','Carnes & Frios','Hortifruti','Padaria','Congelados','Bebidas','Limpeza','Higiene','Outros'];
export function guessAisle(name){ const s=norm(name); if(/massa|macarrao|lasanha|espaguete|arroz|feijao|farinha/.test(s))return AISLES[0]; if(/molho|extrato|tomate|ervilha|milho|atum|sardinha|enlatad/.test(s))return AISLES[1]; if(/queijo|leite|manteiga|requeij|iogurte|creme de leite|parmes|mussarela/.test(s))return AISLES[2]; if(/carne|frango|presunto|peru|bacon|linguic/.test(s))return AISLES[3]; if(/cebola|alho|tomate|alface|cenoura|batata|oregano|louro|manjeric|pimenta/.test(s))return AISLES[4]; if(/pao|baguete|broa|bolo/.test(s))return AISLES[5]; if(/congelad|sorvete|pizza/.test(s))return AISLES[6]; if(/agua|refrigerante|suco|cerveja|vinho/.test(s))return AISLES[7]; if(/detergente|sabao|amaciante|desinfet|limp/.test(s))return AISLES[8]; if(/shampoo|sabonete|papel higienico|creme dental|escova/.test(s))return AISLES[9]; return AISLES[10]; }
export function fuzzyListHit(listName, product){ const li=norm(listName); const pn=norm(product?.name||''); const brand=norm(product?.brand||''); if(!li) return false; if(pn.includes(li)) return true; const tokens=li.split(' ').filter(t=>t.length>=3); if(tokens.some(t=>pn.includes(t))) return true; if(brand && (li.includes(brand)||brand.includes(li))) return true; return false; }
